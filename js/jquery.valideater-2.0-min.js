!function(a){"use strict";a.fn.vldtr=function(e){var r=this,t={alpha:"Value must be letters.",alphanumeric:"Letters and numbers required.",characters4:"At least 4 characters please.",dob:"Please give a valid date of birth.",email:"Invalid email.",matches:"These values do not match.",numeric:"Value must be numeric.",postcode:"Invalid postcode.",radio:"Please choose an option.",required:"This information is required.",livecheck:!0,maxage:122,minage:18,alerts:!0,errorCssClass:"js-vldtr-error",alertCssClass:"js-vldtr-alert"},n=a.extend({},t,e);r.attr("novalidate","");var s={hasErrors:!1,invalidElements:{},init:function(){return r.on("submit",function(){return s.hasErrors=!1,s.assignRef(),s.validate(),s.hasErrors===!1?!0:n.livecheck===!0?(s.livecheck(),!1):!1})},livecheck:function(){a("[data-vldtr]",r).on("change keyup",function(){s.validate(a(this))});var e=a("."+n.errorCssClass+":first"),t="input, select, textarea, button";e.is(t)?e.focus():e.find(t).focus()},alpha:function(a){return/^[a-zA-Z]+$/.test(a.val())===!1||""===a.val()},alphanumeric:function(a){var e=/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/;return e.test(a.val())===!1},characters4:function(a){var e=a.val();return e.length<4&&""!==e},dob:function(a){var e=(new Date).getFullYear(),r=s.formatDate(a.val()),t=a.data().vldtrMinage||n.minage,i=a.data().vldtrMaxage||n.maxage;if(!r||r[1]<1||r[1]>31||r[2]<1||r[2]>12||r[3]>e)return!0;var l=s.formatAge(a);return l>i?(n.dob="You cannot be older than "+i+" years old.",!0):t>l?(n.dob="You must be older than "+t+" years old.",!0):!1},email:function(a){var e=/^([A-Za-z0-9_\'\-\.\+])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return e.test(a.val())===!1},matches:function(e){var r=e.attr("data-vldtr-matches"),t=a("#"+r).val();return e.val()!==t},numeric:function(a){return isNaN(window.parseInt(a.val()))},postcode:function(a){var e=a.val().replace(/\s+/g,""),r=/(((([A-PR-UWYZ][0-9][0-9A-HJKS-UW]?)|([A-PR-UWYZ][A-HK-Y][0-9][0-9ABEHMNPRV-Y]?))\s{0,2}[0-9]([ABD-HJLNP-UW-Z]{2}))|(GIR\s{0,2}0AA))/i;return r.test(e)===!1},radio:function(e){var r=a("input[type=radio]",e);return r.filter(function(){return this.checked}).length?!1:!0},required:function(e){return""===e.val()||e.val()===a(e).attr("placeholder")},formatDate:function(a){var e=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;return a.match(e)},formatAge:function(a){var e=s.formatDate(a.val()),r=new Date(e[3]+"-"+e[2]+"-"+e[1]),t=Date.now()-r.getTime(),n=new Date(t);return Math.abs(n.getFullYear()-1970)},assignRef:function(){a("[data-vldtr]",r).each(function(a){this.ref=this.type+a})},addError:function(e,r){var t=e[0].ref;s.invalidElements[t]=s.invalidElements[t]||[],-1===a.inArray(r,s.invalidElements[t])&&(s.invalidElements[t].push(r),s.showAlert(e,r))},showAlert:function(e,r){if(e.addClass(n.errorCssClass),!e.attr("data-vldtr-alert")){var t=e.attr("data-vldtr-err-"+r),s=t?t:n[r],i=a("<span>"+s+"</span>");i.addClass(n.alertCssClass).addClass(n.alertCssClass+"-"+r).addClass("js-vldtr-"+e[0].ref),e.after(i)}},removeError:function(e,r){var t=e[0].ref;s.invalidElements[t]=a.grep(s.invalidElements[t],function(a){return a!==r}),a("."+n.alertCssClass+"-"+r+".js-vldtr-"+t).remove(),0===s.invalidElements[t].length&&e.removeClass(n.errorCssClass)},runChecks:function(e){for(var r,t=e.attr("data-vldtr").split(","),n=0;n<t.length;n++)r=t[n],s[r]&&(s[r](e)===!0?s.addError(e,r):-1!==a.inArray(r,s.invalidElements[e[0].ref])&&s.removeError(e,r))},validate:function(e){e?s.runChecks(e):a("[data-vldtr]",r).each(function(){s.runChecks(a(this))});var t,n=[];for(t in s.invalidElements)for(var i=0;i<s.invalidElements[t].length;i++)n.push(s.invalidElements[t][i]);n.length&&(s.hasErrors=!0)}};return s.init.apply(this)}}(window.jQuery||window.Zepto);